<!DOCTYPE html>
<html class="no-js" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="An interesting sharing website about data mining and network analysis." name="description"/>
  <link href="https://AlexNLP.github.io/Data-Mining/data%20mining/Reddit%E7%88%AC%E8%99%AB%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98%E8%AF%A6%E8%A7%A3/" rel="canonical"/>
  <link href="../../assets/logo/favicons.png" rel="icon"/>
  <meta content="mkdocs-1.3.0, mkdocs-material-8.2.15" name="generator"/>
  <title>
   Reddit爬虫笔记 - Data Mining
  </title>
  <link href="../../assets/stylesheets/main.c382b1dc.min.css" rel="stylesheet"/>
  <link href="../../assets/stylesheets/palette.cc9b2e1e.min.css" rel="stylesheet"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css?family=Karla:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
  <style>
   :root{--md-text-font:"Karla";--md-code-font:"Ubuntu Mono"}
  </style>
  <link href="../../assets/css/img-grids-floats.css" rel="stylesheet"/>
  <link href="../../assets/css/utils.css" rel="stylesheet"/>
  <link href="../../assets/css/custom_attributes.css" rel="stylesheet"/>
  <link href="../../assets/css/tooltipster.bundle.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
  <script>
   __md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
  </script>
  <script>
   $(document).ready(function() {
                    $('.link-tooltip').tooltipster();
                });
  </script>
  <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" referrerpolicy="no-referrer" rel="stylesheet"/>
  <meta content="Reddit爬虫笔记" property="og:title"/>
  <meta content="Reddit爬虫笔记" name="twitter:title"/>
  <meta content="An interesting sharing website about data mining and network analysis." name="og:description"/>
  <meta content="An interesting sharing website about data mining and network analysis." name="twitter:description"/>
  <meta content="summary" name="twitter:card"/>
  <meta content="https://AlexNLP.github.io/Data-Mining//assets/logo/LOGO_SEO.png" property="og:image"/>
  <meta content="https://AlexNLP.github.io/Data-Mining//assets/logo/LOGO_SEO.png" name="twitter:image"/>
 </head>
 <body data-md-color-accent="light-blue" data-md-color-primary="teal" data-md-color-scheme="default" dir="ltr">
  <script>
   var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])
  </script>
  <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
  <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
  <label class="md-overlay" for="__drawer">
  </label>
  <div data-md-component="skip">
   <a class="md-skip" href="#reddit">
    Skip to content
   </a>
  </div>
  <div data-md-component="announce">
  </div>
  <header class="md-header md-header--lifted" data-md-component="header">
   <nav aria-label="Header" class="md-header__inner md-grid">
    <a aria-label="Data Mining" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Data Mining">
     <img alt="logo" src="../../assets/logo/favicons.png"/>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
     <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z">
      </path>
     </svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
     <div class="md-header__ellipsis">
      <div class="md-header__topic">
       <span class="md-ellipsis">
        Data Mining
       </span>
      </div>
      <div class="md-header__topic" data-md-component="header-topic">
       <span class="md-ellipsis">
        Reddit爬虫笔记
       </span>
      </div>
     </div>
    </div>
    <form class="md-header__option" data-md-component="palette">
     <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="light-blue" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="teal" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
     <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
      <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
       <path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z">
       </path>
      </svg>
     </label>
     <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="blue" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
     <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
      <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
       <path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z">
       </path>
      </svg>
     </label>
    </form>
    <label class="md-header__button md-icon" for="__search">
     <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z">
      </path>
     </svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
     <label class="md-search__overlay" for="__search">
     </label>
     <div class="md-search__inner" role="search">
      <form class="md-search__form" name="search">
       <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
       <label class="md-search__icon md-icon" for="__search">
        <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
         <path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z">
         </path>
        </svg>
        <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
         <path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z">
         </path>
        </svg>
       </label>
       <nav aria-label="Search" class="md-search__options">
        <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
         <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z">
          </path>
         </svg>
        </button>
       </nav>
      </form>
      <div class="md-search__output">
       <div class="md-search__scrollwrap" data-md-scrollfix="">
        <div class="md-search-result" data-md-component="search-result">
         <div class="md-search-result__meta">
          Initializing search
         </div>
         <ol class="md-search-result__list">
         </ol>
        </div>
       </div>
      </div>
     </div>
    </div>
   </nav>
   <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
     <ul class="md-tabs__list">
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="../../NLP/README..../">
        NLP
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link md-tabs__link--active" href="./">
        Data mining
       </a>
      </li>
     </ul>
    </div>
   </nav>
  </header>
  <div class="md-container" data-md-component="container">
   <main class="md-main" data-md-component="main">
    <div class="md-main__inner md-grid">
     <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
         <label class="md-nav__title" for="__drawer">
          <a aria-label="Data Mining" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Data Mining">
           <img alt="logo" src="../../assets/logo/favicons.png"/>
          </a>
          Data Mining
         </label>
         <ul class="md-nav__list" data-md-scrollfix="">
          <li class="md-nav__item md-nav__item--nested">
           <input checked="" class="md-nav__toggle md-toggle" data-md-state="indeterminate" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
           <label class="md-nav__link" for="__nav_1">
            NLP
            <span class="md-nav__icon md-icon">
            </span>
           </label>
           <nav aria-label="NLP" class="md-nav" data-md-level="1">
            <label class="md-nav__title" for="__nav_1">
             <span class="md-nav__icon md-icon">
             </span>
             NLP
            </label>
            <ul class="md-nav__list" data-md-scrollfix="">
             <li class="md-nav__item">
              <a class="md-nav__link" href="../../NLP/README..../">
               nlp-datasets
              </a>
             </li>
            </ul>
           </nav>
          </li>
          <li class="md-nav__item md-nav__item--active md-nav__item--nested">
           <input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
           <label class="md-nav__link" for="__nav_2">
            Data mining
            <span class="md-nav__icon md-icon">
            </span>
           </label>
           <nav aria-label="Data mining" class="md-nav" data-md-level="1">
            <label class="md-nav__title" for="__nav_2">
             <span class="md-nav__icon md-icon">
             </span>
             Data mining
            </label>
            <ul class="md-nav__list" data-md-scrollfix="">
             <li class="md-nav__item md-nav__item--active">
              <input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
              <label class="md-nav__link md-nav__link--active" for="__toc">
               Reddit爬虫笔记
               <span class="md-nav__icon md-icon">
               </span>
              </label>
              <a class="md-nav__link md-nav__link--active" href="./">
               Reddit爬虫笔记
              </a>
              <nav aria-label="Table of contents" class="md-nav md-nav--secondary">
               <label class="md-nav__title" for="__toc">
                <span class="md-nav__icon md-icon">
                </span>
                Table of contents
               </label>
               <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#reddit_1">
                  Reddit爬虫方式
                 </a>
                 <nav aria-label="Reddit爬虫方式" class="md-nav">
                  <ul class="md-nav__list">
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#reddit-api">
                     Reddit API
                    </a>
                   </li>
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#scrapy">
                     Scrapy 爬虫
                    </a>
                   </li>
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#_1">
                     伪装请求头爬虫
                    </a>
                   </li>
                  </ul>
                 </nav>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#_2">
                  总结
                 </a>
                </li>
               </ul>
              </nav>
             </li>
            </ul>
           </nav>
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav aria-label="Table of contents" class="md-nav md-nav--secondary">
         <label class="md-nav__title" for="__toc">
          <span class="md-nav__icon md-icon">
          </span>
          Table of contents
         </label>
         <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
          <li class="md-nav__item">
           <a class="md-nav__link" href="#reddit_1">
            Reddit爬虫方式
           </a>
           <nav aria-label="Reddit爬虫方式" class="md-nav">
            <ul class="md-nav__list">
             <li class="md-nav__item">
              <a class="md-nav__link" href="#reddit-api">
               Reddit API
              </a>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#scrapy">
               Scrapy 爬虫
              </a>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#_1">
               伪装请求头爬虫
              </a>
             </li>
            </ul>
           </nav>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="#_2">
            总结
           </a>
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-content" data-md-component="content">
      <article class="md-content__inner md-typeset">
       <h1 id="reddit">
        Reddit爬虫笔记
        <a class="headerlink" href="#reddit" title="Permanent link">
         ¶
        </a>
       </h1>
       <p>
        <strong>
         Reddit
        </strong>
        is a network of communities where people can dive into their interests, hobbies and passions. There’s a community for whatever you’re interested in on
        <strong>
         Reddit
        </strong>
        .
       </p>
       <p>
        简单来讲，Reddit就是在特定子主题下用户自动发掘内容和分享的讨论社区，其中包含帖子、评论、投票、点赞、分享等操作，其操作自由度和交互性非常适合广大用户创造价值。
       </p>
       <p>
        Reddit对于数据挖掘工作者非常友好。其一在于，目前已有非常多的Reddit公开数据集可以方便获取，如REDDITBINARY、REDDITMULTI5K等数据集被广泛用于顶会中系列模型的训练。另外，Reddit网站也提供了限制较少的API，可以简单上手获取到称心如意的一手研究数据。因此，研究Reddit数据集如何获取对于往后的研究工作是十分必要的。
       </p>
       <h2 id="reddit_1">
        Reddit爬虫方式
        <a class="headerlink" href="#reddit_1" title="Permanent link">
         ¶
        </a>
       </h2>
       <h3 id="reddit-api">
        Reddit API
        <a class="headerlink" href="#reddit-api" title="Permanent link">
         ¶
        </a>
       </h3>
       <p>
        有用的链接地址
       </p>
       <ol>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.reddit.com%2Fdev%2Fapi">
          官方 api 说明文档
         </a>
        </li>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Freddit-archive%2Freddit%2Fwiki%2FAPI">
          官方 api 使用规范
         </a>
        </li>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Freddit-archive%2Freddit%2Fwiki%2FOAuth2">
          reddit 授权说明
         </a>
        </li>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.reddit.com%2Fprefs%2Fapps%2F">
          reddit app 列表地址
         </a>
        </li>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fpraw.readthedocs.io%2Fen%2Flatest%2Findex.html">
          praw 文档
         </a>
        </li>
        <li>
         <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.storybench.org%2Fhow-to-scrape-reddit-with-python%2F">
          python 采集 reddit 例子
         </a>
        </li>
       </ol>
       <p>
        具体操作步骤：
       </p>
       <ul>
        <li>
         注册Reddit账号
        </li>
        <li>
         申请Reddit API
         <br/>
         首先在
         <a href="https://www.reddit.com/prefs/apps">
          Reddit app
         </a>
         以Script for personal use身份填写name, description, redirect url，然后create app得到以下的信息：
         <br/>
         <strong>
          client_id
         </strong>
         : The client ID is at least a 14-character string listed just under “personal use script” for the desired
         <a href="https://www.reddit.com/prefs/apps/">
          developed application
         </a>
         <br/>
         <strong>
          client_secret
         </strong>
         : The client secret is at least a 27-character string listed adjacent to
         <code>
          secret
         </code>
         for the application.
         <br/>
         <strong>
          password
         </strong>
         : The password for the Reddit account used to register the application.
         <br/>
         <strong>
          username
         </strong>
         : The username of the Reddit account used to register the application.
         <br/>
         信息详细介绍请看：
         <a href="https://praw.readthedocs.io/en/latest/getting_started/authentication.html">
          Authenticating via OAuth — PRAW 7.6.1.dev0 documentation
         </a>
        </li>
        <li>
         利用以上信息开始填写代码
         <br/>
         <div class="highlight">
          <pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a># coding: UTF-8 
<a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>#!/use/bin/env python3 
<a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a>import praw 
<a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a>import pandas as pd 
<a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>import datetime as dt 
<a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>
<a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>reddit = praw.Reddit( client_id='your-clientID', 
<a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>                    client_secret='your secret',
<a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>                    user_agent='your_platform:dev_tmp:v0.1 (by /u/dev_tmp)', 
<a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>                    # redirect_uri='http://localhost:8080' 
<a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>                    username='dev_tmp', 
<a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>                    password='HGFhgf123'
<a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>) 
<a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a># print(reddit.auth.url(["identity"], "...", "permanent")) 
<a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>print(reddit.user.me()) 
<a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a># all 是&lt;class 'praw.models.reddit.subreddit.Subreddit'&gt;类型, 
<a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a># 具体使用见：https://praw.readthedocs.io/en/latest/code_overview/models/subreddit.html 
<a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a>all = reddit.subreddit("all") 
<a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a>print(type(all)) 
<a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a># submission 的类型是&lt;class 'praw.models.reddit.submission.Submission'&gt;， 
<a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a># 具体属性列表见：https://praw.readthedocs.io/en/latest/code_overview/models/submission.html 
<a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a>messages = { "id": [], 
<a href="#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a>            "url": [], 
<a href="#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a>            "title": [], 
<a href="#__codelineno-0-27" id="__codelineno-0-27" name="__codelineno-0-27"></a>            "score": [], 
<a href="#__codelineno-0-28" id="__codelineno-0-28" name="__codelineno-0-28"></a>            "comms_num": [], 
<a href="#__codelineno-0-29" id="__codelineno-0-29" name="__codelineno-0-29"></a>            "body": [], 
<a href="#__codelineno-0-30" id="__codelineno-0-30" name="__codelineno-0-30"></a>            "created": [] 
<a href="#__codelineno-0-31" id="__codelineno-0-31" name="__codelineno-0-31"></a>} 
<a href="#__codelineno-0-32" id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a href="#__codelineno-0-33" id="__codelineno-0-33" name="__codelineno-0-33"></a>for submission in all.search("tiktok", limit=5): 
<a href="#__codelineno-0-34" id="__codelineno-0-34" name="__codelineno-0-34"></a>messages["id"].append(submission.id) 
<a href="#__codelineno-0-35" id="__codelineno-0-35" name="__codelineno-0-35"></a>messages["url"].append(submission.url) 
<a href="#__codelineno-0-36" id="__codelineno-0-36" name="__codelineno-0-36"></a>messages["title"].append(submission.title) 
<a href="#__codelineno-0-37" id="__codelineno-0-37" name="__codelineno-0-37"></a>messages["score"].append(submission.score) 
<a href="#__codelineno-0-38" id="__codelineno-0-38" name="__codelineno-0-38"></a>messages["comms_num"].append(submission.num_comments) 
<a href="#__codelineno-0-39" id="__codelineno-0-39" name="__codelineno-0-39"></a>messages["body"].append(submission.selftext) 
<a href="#__codelineno-0-40" id="__codelineno-0-40" name="__codelineno-0-40"></a>messages["created"].append(submission.created) 
<a href="#__codelineno-0-41" id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a href="#__codelineno-0-42" id="__codelineno-0-42" name="__codelineno-0-42"></a># search 结果类型是&lt;class 'praw.models.listing.generator.ListingGenerator'&gt; 
<a href="#__codelineno-0-43" id="__codelineno-0-43" name="__codelineno-0-43"></a># praw 中的其他类型文档为：
<a href="#__codelineno-0-44" id="__codelineno-0-44" name="__codelineno-0-44"></a>https://praw.readthedocs.io/en/latest/code_overview/other.html # res = 
<a href="#__codelineno-0-45" id="__codelineno-0-45" name="__codelineno-0-45"></a>all.search("tiktok") 
<a href="#__codelineno-0-46" id="__codelineno-0-46" name="__codelineno-0-46"></a># print(type(res)) 
<a href="#__codelineno-0-47" id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a href="#__codelineno-0-48" id="__codelineno-0-48" name="__codelineno-0-48"></a>data = pd.DataFrame(messages) 
<a href="#__codelineno-0-49" id="__codelineno-0-49" name="__codelineno-0-49"></a>data.to_csv('data.csv', index=False)
</code></pre>
         </div>
        </li>
       </ul>
       <p>
        这样就能获得你想要的数据了
       </p>
       <ul>
        <li>
         <p>
          reddit API持续开发|
          <br/>
          这部分可以详见Reddit给出的官方文档，按照文档即可得到相应的数据。
         </p>
        </li>
        <li>
         <p>
          但是可能会存在以下的问题，我已经给出了解决方法如下。
         </p>
        </li>
        <li>
         <p>
          <strong>
           <em>
            问题：目前Reddit 只能科学访问。如果按照正常的爬虫方式来获取网站数据会遇到
            <br/>
            prawcore.exceptions.RequestException: error with request HTTPSConnectionPool(host=’
            <a href="http://www.reddit.com">
             www.reddit.com
            </a>
            ’,
            <a href="../port%3D443" title="port=443">
             port=443
            </a>
            ): Max retries exceeded with url: /api/v1/access_token (Caused by ProxyError(‘Cannot connect to proxy.’, OSError(0, ‘Error’)))&gt;)
           </em>
          </strong>
         </p>
        </li>
        <li>
         <p>
          <strong>
           <em>
            解决:
           </em>
          </strong>
         </p>
        </li>
       </ul>
       <p>
        相关解决参考
        <br/>
        <a href="https://blog.csdn.net/qq_39377418/article/details/102552822">
         # HTTPSConnectionPool(host=’xxxxx’, port=443): Max retries exceeded with url:xxxxxxxx (Caused by Ne…
        </a>
        ,
        <br/>
        <a href="https://www.cnblogs.com/Eeyhan/p/14610998.html">
         python爬虫之requests.exceptions.ProxyError: HTTPSConnectionPool(host=’www.xxxx.com’, port=443): Max retries exceeded with url: / (Caused by ProxyError(‘Cannot connect to proxy.’, timeout(‘_ssl.c:1108: Th - Eeyhan - 博客园 (cnblogs.com)
        </a>
       </p>
       <div class="highlight">
        <pre><span></span><code>- 使用VPN科学访问解决error with request HTTPSConnectionPool。l[Clash for Windows](../Clash%20for%20Windows "Clash for Windows") 仅支持浏览器网页，其他程序类软件无法使用它进行科学上网。但是它提供了一个非常便捷的工具TUN Mode，可以使所有的程序都经过Proxy进行科学访问，这样就能解决ProxyError等问题。另外，最好选取GLobal下的美国服务器会更加稳定。如果想更加高效稳定爬取大量Reddit数据，可以选择将[程序部署国外外网服务器爬取](../%E7%A8%8B%E5%BA%8F%E9%83%A8%E7%BD%B2%E5%9B%BD%E5%A4%96%E5%A4%96%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%88%AC%E5%8F%96 "程序部署国外外网服务器爬取")。
- 关闭系统代理ProxyError。系统代理仍然会导致出现上述错误。

![Pasted image 20220520174235.png](../assets/img/Pasted%20image%2020220520174235.png "Pasted image 20220520174235.png")
</code></pre>
       </div>
       <p>
        Reddit网站API爬虫示例可以参见：
        <br/>
        <a href="https://blog.csdn.net/zm714981790/article/details/51326036">
         (36条消息) Reddit网站获赞最高文章/评论的爬取_小丫头い的博客-CSDN博客
        </a>
        <br/>
        <a href="https://my.oschina.net/hgfdoing/blog/4314811">
         如何采集reddit - hgf doing - OSCHINA - 中文开源技术交流社区
        </a>
       </p>
       <h3 id="scrapy">
        Scrapy 爬虫
        <a class="headerlink" href="#scrapy" title="Permanent link">
         ¶
        </a>
       </h3>
       <p>
        Scrapy爬虫的简单介绍可以参见：
        <br/>
        <a href="https://edu.csdn.net/notebook/python/week09/1.html">
         1. Scrapy框架介绍与安装 · GitBook (csdn.net)
        </a>
        <br/>
        <a href="https://zhuanlan.zhihu.com/p/24669128">
         Scrapy爬虫框架教程（一）– Scrapy入门 - 知乎 (zhihu.com)
        </a>
        <br/>
        <a href="https://blog.csdn.net/Ka_Ka314/article/details/81114570">
         (36条消息) Scrapy爬虫入门教程十三 Settings（设置）___静禅__的博客-CSDN博客
        </a>
       </p>
       <ul>
        <li>
         创建项目
         <br/>
         <div class="highlight">
          <pre><span></span><code><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>scrapy startproject reddit
</code></pre>
         </div>
        </li>
       </ul>
       <p>
        就会得到这样的文件夹
        <br/>
        <div class="highlight">
         <pre><span></span><code><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>reddit/
<a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a>    scrapy.cfg
<a href="#__codelineno-2-3" id="__codelineno-2-3" name="__codelineno-2-3"></a>    reddit/
<a href="#__codelineno-2-4" id="__codelineno-2-4" name="__codelineno-2-4"></a>        __init__.py
<a href="#__codelineno-2-5" id="__codelineno-2-5" name="__codelineno-2-5"></a>        items.py
<a href="#__codelineno-2-6" id="__codelineno-2-6" name="__codelineno-2-6"></a>        pipelines.py
<a href="#__codelineno-2-7" id="__codelineno-2-7" name="__codelineno-2-7"></a>        settings.py
<a href="#__codelineno-2-8" id="__codelineno-2-8" name="__codelineno-2-8"></a>        spiders/
<a href="#__codelineno-2-9" id="__codelineno-2-9" name="__codelineno-2-9"></a>            __init__.py
<a href="#__codelineno-2-10" id="__codelineno-2-10" name="__codelineno-2-10"></a>            ...
</code></pre>
        </div>
       </p>
       <p>
        这些文件分别是:
       </p>
       <ul>
        <li>
         scrapy.cfg: 项目的配置文件。
        </li>
        <li>
         reddit/: 该项目的python模块。之后您将在此加入代码。
        </li>
        <li>
         reddit/items.py: 项目中的item文件。
        </li>
        <li>
         reddit/pipelines.py: 项目中的pipelines文件。
        </li>
        <li>
         reddit/settings.py: 项目的设置文件。
        </li>
        <li>
         <p>
          reddit/spiders/: 放置spider代码的目录。
         </p>
        </li>
        <li>
         <p>
          在reddit/spiders目录下创建reddit.py文件
          <br/>
          <div class="highlight">
           <pre><span></span><code><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>scrapy genspider reddit reddit.com
</code></pre>
          </div>
         </p>
        </li>
        <li>
         <p>
          启动爬虫
          <br/>
          <div class="highlight">
           <pre><span></span><code><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>scrapy crawl reddit
</code></pre>
          </div>
         </p>
        </li>
       </ul>
       <p>
        这样就可以爬取reddit.com上的子社区的数据啦。
       </p>
       <p>
        Reddit网站Scrapy爬虫示例可以参见：
        <br/>
        <a href="https://github.com/fibears/Article-for-Datartisan/blob/master/article/%E5%9F%BA%E4%BA%8EScrapy%E7%9A%84Reddit%E7%88%AC%E5%8F%96%E4%B8%8E%E5%88%86%E6%9E%90.md">
         Article-for-Datartisan/基于Scrapy的Reddit爬取与分析.md at master · fibears/Article-for-Datartisan (github.com)
        </a>
        <br/>
        <a href="https://www.datasciencecentral.com/scraping-reddit/">
         Scraping Reddit - DataScienceCentral.com
        </a>
        <br/>
        <a href="https://github.com/StrikingLoo/kitten-getter">
         StrikingLoo/kitten-getter: A Spider that crawls reddit.com/r/cats (github.com)
        </a>
       </p>
       <h3 id="_1">
        伪装请求头爬虫
        <a class="headerlink" href="#_1" title="Permanent link">
         ¶
        </a>
       </h3>
       <ul>
        <li>
         <p>
          request网页返回response
          <br/>
          <div class="highlight">
           <pre><span></span><code><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>import requests
<a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a>import csv
<a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>import time
<a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a>from bs4 import BeautifulSoup4
<a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a>
<a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a>url = "https://old.reddit.com/r/datascience/"
<a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a># Headers to mimic a browser visit
<a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>headers = {'User-Agent': 'Mozilla/5.0'}
<a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a># Returns a requests.models.Response object
<a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a>page = requests.get(url, headers=headers)
</code></pre>
          </div>
         </p>
        </li>
        <li>
         <p>
          需要主要是这样的方式爬虫会导致UA和IP被封，因此，我们需要建立Random UA和IP池来动态管理爬虫进程的伪装，具体的操作可以详见：
          <br/>
          <a href="https://blog.csdn.net/weixin_51852924/article/details/120019488">
           (36条消息) 八、python爬虫伪装 [免费伪装ip伪装请求头]_袁六加.的博客-CSDN博客_python伪装ip
          </a>
          <br/>
          Reddit网站伪装请求头爬虫示例可以参见：
          <br/>
          <a href="https://www.h5w3.com/204097.html">
           使用Python和BeautifulSoup 4抓取Reddit - H5W3
          </a>
         </p>
        </li>
       </ul>
       <h2 id="_2">
        总结
        <a class="headerlink" href="#_2" title="Permanent link">
         ¶
        </a>
       </h2>
       <p>
        至此，关于Reddit网站的爬虫方式已经介绍完毕，后续的使用将继续更新。
       </p>
      </article>
     </div>
    </div>
    <a class="md-top md-icon" data-md-component="top" data-md-state="hidden" href="#">
     <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z">
      </path>
     </svg>
     Back to top
    </a>
   </main>
   <footer class="md-footer">
    <nav aria-label="Footer" class="md-footer__inner md-grid">
     <a aria-label="Previous: nlp-datasets" class="md-footer__link md-footer__link--prev" href="../../NLP/README..../" rel="prev">
      <div class="md-footer__button md-icon">
       <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z">
        </path>
       </svg>
      </div>
      <div class="md-footer__title">
       <div class="md-ellipsis">
        <span class="md-footer__direction">
         Previous
        </span>
        nlp-datasets
       </div>
      </div>
     </a>
    </nav>
    <div class="md-footer-meta md-typeset">
     <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
      </div>
     </div>
    </div>
   </footer>
  </div>
  <div class="md-dialog" data-md-component="dialog">
   <div class="md-dialog__inner md-typeset">
   </div>
  </div>
  <script id="__config" type="application/json">
   {"base": "../..", "features": ["navigation.indexes", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}
  </script>
  <script src="../../assets/javascripts/bundle.a6c66575.min.js">
  </script>
  <script src="../../assets/js/mathjax.js">
  </script>
  <script src="../../assets/js/utils.js">
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <script src="../../assets/js/tooltipster.bundle.js">
  </script>
 </body>
</html>